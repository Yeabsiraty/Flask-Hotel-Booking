{% extends 'forall.html' %}
{% block content %}
<h1 class="room_text">Admin</h1><br>
<div class="search">
    <form action="" method="post">
        <input type="text" name="search" placeholder="search">
    </form>
</div>
<div class="delete_square" style="display:none;">
    <h1 class="close_button" onclick="toggleclose()">✖</h1>
    <h1 class="delete_confirm">Admin Confirmation</h1>
    <h3 style="text-align: center;">Delete Username: <span style="color:red" id="delete_username_input"></span></h3>
    <form action="{{url_for('delete_admin')}}" method="post">
        <input type="hidden" name="username" value = "" id="username_id_input">
        <input type="password" name="password" placeholder="Password" required><br><br>
        <input type="submit" value="Delete" class="confirm_btn">
    </form>
</div>
<div class="edit_square" style="display:none;">
    <h1 class="close_button" onclick="toggleclose()">✖</h1>
    <h1 class="delete_confirm">Edit Admin Username: <span style="color: red;" id="edit_id_info"></span></h1>
    <form action="{{url_for('edit_admin')}}" method="post">
        <div class="edit_values">
            <input type="hidden" name="emp_id" id="emp_id_input">
            <label for="">Username</label><br><br>
            <input type="text" name="username" value="" id="user_name_input"><br><br>

            <label for="">New Password</label><br><br>
            <input type="password" name="n_pass" value="" ><br><br>
                    </div>
        <div class="edit_labels">    
            <label for="">Old Password</label><br><br>
            <input type="password" name="o_pass" value="" ><br><br>
       
             <label for="">Confirm Password</label><br><br>
            <input type="password" name="c_pass" value="" ><br><br>
        
        </div>
        
        <div class="submit_edit_btn">
            <input type="submit" value="Edit" class="edit_btn">
        </div>
    </form>
</div>
<div class="edit_square add_square" style="display:none;">
    <h1 class="close_button" onclick="toggleclose()">✖</h1>
    <h1 class="delete_confirm">Add Admin</h1>
    <form action="{{url_for('admin_add')}}" method="post">
        <div class="edit_values">
            <label for="">Employee_Id</label><br><br>
            <input type="text" name="emp_id" value=""><br><br>
            <label for="">Last Name</label><br><br>
            <input type="text" name="l_name" value=""><br><br>
            <label for="">Password</label><br><br>
            <input type="password" name="password" value=""><br><br>
        </div>
        <div class="edit_labels">
            <label for="">First Name</label><br><br>
            <input type="text" name="f_name" value=""><br><br>
            <label for="">Username</label><br><br>
            <input type="text" name="username" value=""><br><br>
            <label for="">Confirm Password</label><br><br>
            <input type="password" name="c_pass" value=""><br><br>
        </div>
        
        
        <div class="submit_edit_btn">
            <input type="submit" value="Add" class="add_btn admin_add_btn">
        </div>
    </form>
</div>
{%if database7%}
<div class="room_table event_booked_table">
    <table border="1px" class="room_table table">
        <thead>
            <tr>
                <th>Admin Id</th>
                <th>Username</th>
                <th style="width: 15%;">Edit Table</th>
            </tr>
        </thead>
        <tbody>
            {% for data in database7 %}
            <tr>
                <td style="width: 20%;">{{ data["Employee_Id"] }}</td>
                <td style="width: 20%;">{{data["Username"]}}</td>
                <td>
                    <div class="button">
                        <div class="edit">
                            <button onclick="toggleEdit('{{ data['Username'] }}',)">Edit</button>
                        </div>
                        <div class="delete">
                            <button onclick="toggle_delete('{{ data['Username'] }}',)">Delete</button>
                        </div>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table><br>
    {%endif%}
    <button class="add_btn" onclick="toggleadd()" style="width: 20%;">Add</button><br><br>
    <a href="{{url_for('admin')}}" ><button class="refreshe_button" style="width: 20%;">Refreshe</button></a>
</div>

<script>
    function toggleEdit(user) {
        const deleteSquare = document.querySelector('.delete_square');
        const editSquare = document.querySelector('.edit_square');
        const x = document.querySelector('.add_square');
        const a = document.getElementById("edit_id_info");
        const p = document.getElementById("user_name_input")

        p.value = user;

        a.innerHTML = user;
        if (editSquare.style.display === 'block') {
            editSquare.style.display = 'none';
        } else {
            deleteSquare.style.display = 'none'; 
            editSquare.style.display = 'block';
            x.style.display = 'none.'
        }
    }

    function toggle_delete(user) {
        const editSquare = document.querySelector('.edit_square');
        const deleteSquare = document.querySelector('.delete_square');
        const x = document.querySelector('.add_square')
        const b = document.getElementById("delete_username_input");
        const r = document.getElementById("username_id_input");

        r.value = user;

        b.innerHTML = user;
        
        if (deleteSquare.style.display === 'block') {
            deleteSquare.style.display = 'none';
            const x = document.querySelector('.add_square')
        } else {
            editSquare.style.display = 'none'; 
            deleteSquare.style.display = 'block';
            x.style.display = 'none';
        }
    }

    function toggleadd() {
        const editSquare = document.querySelector('.edit_square');
        const deleteSquare = document.querySelector('.delete_square');
        const x = document.querySelector('.add_square')
        
        if (x.style.display === 'block') {
            x.style.display = 'none';
        } else {
            x.style.display = 'block';
            editSquare.style.display = 'none'; 
            deleteSquare.style.display = 'none';
        }
    }
    
    function toggleclose(){
        
        const editSquare = document.querySelector('.edit_square');
        const deleteSquare = document.querySelector('.delete_square');
        const x = document.querySelector('.add_square')


        x.style.display = 'none';
        editSquare.style.display = 'none'; 
        deleteSquare.style.display = 'none';
    }
</script>

{% endblock %}
